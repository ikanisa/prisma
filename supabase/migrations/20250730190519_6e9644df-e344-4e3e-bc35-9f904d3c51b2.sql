-- Add centralized documents for agent learning
INSERT INTO centralized_documents (id, title, document_type, agent_scope, status, content, file_purpose, created_at) VALUES
('doc-easymo-guide-001', 'easyMO Platform Guide', 'guide', 'general', 'active', 'easyMO is Rwanda''s first WhatsApp-only super-app that combines Mobile Money payments, motorcycle transport, and local commerce. The platform operates entirely through WhatsApp chat, requiring no app downloads. Users can generate QR codes for payments, find nearby drivers, discover local businesses, and shop from farmers and retailers. The AI agent handles all interactions using natural language processing, location services, and payment integration with MTN MoMo and Airtel Money.', 'assistants', now()),
('doc-payment-procedures-001', 'Payment Processing Procedures', 'procedure', 'payments', 'active', 'Payment processing in easyMO follows these steps: 1) User requests payment QR generation or payment execution 2) System validates user identity and amount limits 3) QR code generated with unique transaction ID 4) Payment processed through MoMo API integration 5) Confirmation sent to both parties 6) Transaction logged for reconciliation. The agent must verify amounts, check daily limits, handle failed transactions gracefully, and provide USSD fallback options for users without QR scanning capability.', 'assistants', now()),
('doc-agent-conversation-flows-001', 'Agent Conversation Flow Documentation', 'documentation', 'conversation', 'active', 'The Omni Agent follows structured conversation flows: Welcome → Intent Classification → Context Gathering → Action Execution → Confirmation → Follow-up. Each flow maintains context through memory systems, uses templates for consistent responses, and provides action buttons for user guidance. The agent supports Kinyarwanda, English, French, and Swahili, automatically detecting language preferences. All conversations are logged for learning and improvement. Critical flows include payment generation, ride requests, business discovery, and customer support escalation.', 'assistants', now())
ON CONFLICT (id) DO UPDATE SET
  title = EXCLUDED.title,
  content = EXCLUDED.content,
  status = EXCLUDED.status;