# Traceability Matrix — Accounting Close Foundation (A-1)

## Governance & Approvals Backbone
| Standard / Regulation | Clause reference | Control / Requirement | Implementation (code or schema) | Evidence captured |
| --- | --- | --- | --- | --- |
| ISQM 1 | 25-32 | Maintain documented quality objectives and monitoring across audit, tax, accounting. | Governance policy packs `STANDARDS/POLICY/audit_governance_pack.md`, `tax_governance_pack.md`, `accounting_governance_pack.md`; approvals overview `STANDARDS/POLICY/approvals_matrix.md`. | Policy acknowledgement workflow, ActivityLog `module` + `policy_pack` columns populated via catalog. |
| ISA 230 | 8-11 | Preserve audit documentation completeness with hashed manifests. | Archive sync function `/functions/v1/archive-sync`, `engagement_archives` manifest updates, ActivityLog `ARCHIVE_MANIFEST_UPDATED`. | Archive manifest returning checksum & module summary stored in `engagement_archives`. |
| ISA 220 (Revised) | 13-39 | Enforce partner/EQR leadership over audit engagements. | Approval queue kinds `AUDIT_PLAN_FREEZE`, `AUDIT_REPORT_RELEASE`; Activity event catalog entries `PLAN_*` with policy pack `AP-GOV-1`. | ActivityLog enriched columns, approval_queue records, immutable archive manifest on plan lock. |
| ISA 220 (Revised) | 21-33 | Track preparer/manager/partner stages consistently for every audit module. | Shared baseline tables `audit_module_records`, `audit_record_approvals` (`supabase/sql/audit_base_schema.sql`, RLS in `supabase/sql/audit_base_rls.sql`). | Central register rows showing module_code/status/stage plus approval decisions per stage. |
| ISA 600 (Revised) | 19-49 | Manage group components, instructions, and review oversight for component auditors. | GRP-1 schema/API (`supabase/sql/audit_GRP1_*`, `/api/group/*`), audit workspace (`apps/web/app/audit/group/page.tsx`). | ActivityLog (`GRP_*`), audit module manifests with workpaper links and review status. |
| ISA 402 | 9-21 | Evaluate service organisations, SOC reports, and complementary user controls. | SOC-1 schema/API (`supabase/sql/audit_SOC1_*`, `/api/soc/*`), service org workspace (`apps/web/app/audit/service-orgs/page.tsx`). | ActivityLog (`SOC_*`), module records documenting CUEC tests and exception escalations. |
| ISA 620 (Using the Work of an Auditor's Expert) & ISA 610 (Using the Work of Internal Auditors) | 9-21 / 15-24 | Document competence/objectivity assessments and reliance conclusions for specialists/internal audit. | EXP-1 schema/API (`supabase/sql/audit_EXP1_*`, `/api/exp/*`), specialists workspace (`apps/web/app/audit/specialists/page.tsx`). | Evidence manifests with memo documents, ActivityLog (`EXP_*`) entries for reliance updates, approval queue for conclusions. |
| ISA 720 (Revised) | 12-24 | Capture and resolve other information inconsistencies before report release. | OI-1 schema/API (`supabase/sql/audit_OI1_*`, `/api/oi/*`), other information workspace (`apps/web/app/audit/other-information/page.tsx`). | Other information manifest, flag history, ActivityLog (`OI_*`) for flags/resolutions, manager approvals. |
| IESBA Code Section 600 | 600.5-600.22 | Guard independence when supplying tax/accounting support to audit clients. | Policy packs `T-GOV-1`, `A-GOV-1`; telemetry exception table (Phase 5) monitors independence overrides. | ActivityLog severity flag from catalog; independence incidents stored in telemetry once Phase 5 delivered. |
| Malta ITA governance | CFR Circulars 05/2023-06/2023 | Require technical reviewer checkpoints on high-risk refund and ATAD matters. | Approval matrix row (T-GOV-1) auto-routes via approval_queue (`TAX_POLICY_APPROVAL`). | ActivityLog entries `MT_CIT_APPROVAL_SUBMITTED`, `MT_CIT_APPROVED` enriched with policy pack `T-GOV-1`. |
| OECD Pillar Two & EU Minimum Tax Directive | Articles 6-10 | Model QDMTT and IIR calculations with GIR-ready evidence. | Pillar Two schema (`supabase/migrations/20250924200000_tax_pillar_two_schema.sql`), edge function branch in `supabase/functions/tax-mt-nid`, UI workflow `src/pages/tax/pillar-two.tsx`. | ActivityLog `PILLAR_TWO_COMPUTED`, history in `pillar_two_computations`, GIR payload stored per computation. |
| OECD Model Tax Convention & MAP Manual | Articles 23, 25 | Maintain treaty relief determinations and MAP/APA dispute logs. | Treaty WHT schema (`supabase/migrations/20250924210000_tax_treaty_wht.sql`), calculator in `supabase/functions/tax-mt-nid`, UI workflow `src/pages/tax/treaty-wht.tsx`. | ActivityLog `TREATY_WHT_COMPUTED`, `TAX_DISPUTE_EVENT_LOGGED`, dispute history in `tax_dispute_cases` & `tax_dispute_events`. |
| IRC §§951A, 163(j), 55, 4501 | Various | Compute US-specific overlays (GILTI, interest limitation, CAMT, stock buyback excise). | US overlay schema (`supabase/migrations/20250924213000_tax_us_overlays.sql`), calculators in `src/lib/tax/calculators.ts`, edge handler `supabase/functions/tax-mt-nid`, UI `src/pages/tax/us-overlays.tsx`. | ActivityLog `US_GILTI_COMPUTED`, `US_163J_COMPUTED`, `US_CAMT_COMPUTED`, `US_4501_COMPUTED`, history in `us_tax_overlay_calculations`. |
| ISQM 1 Monitoring | 48-52 | Capture SLA, coverage, and refusal telemetry for continuous quality management. | Telemetry tables `telemetry_service_levels`, `telemetry_coverage_metrics`, `telemetry_refusal_events`; documentation in `docs/telemetry.md`. | Dashboards join telemetry tables with ActivityLog modules; breaches flagged via `status` column. |


| Standard / Regulation | Clause reference | Control / Requirement | Implementation (code or schema) | Evidence captured |
| --- | --- | --- | --- | --- |
| IAS 1 | 15-25, 54-60 | Maintain complete ledger and chart of accounts aligned to presentation lines. | `ledger_accounts`, `coa_map`, draft financials endpoint (`apps/web/app/api/financials/draft/route.ts`). | Trial balance snapshots, FS mapping ActivityLog (`FS_MAPPING_APPLIED`). |
| IAS 1 | 134-138 | Document material variances vs prior period/budget and obtain explanations. | `variance_rules`, `variance_results`, variance run API (`apps/web/app/api/variance/run/route.ts`). | Variance run ActivityLog (`VARIANCE_RUN`), variance result rows with status/explanations. |
| IAS 7 | 18-20, 43 | Capture cash balances and reconciling items before issuing cash flow statement. | `reconciliations` (type=BANK), reconciliation API (`apps/web/app/api/recon/*`), audit workbench UI (`apps/web/app/audit/reconciliations/page.tsx`). | Reconciliation schedules (document id), ActivityLog (`RECON_CLOSED`), audit module manifest entries. |
| IAS 7 | 30-31 | Maintain working capital reconciliations (AR/AP/GRNI) feeding indirect cash flow. | Reconciliation schema + Close lock validation in `apps/web/app/api/close/lock/route.ts`. | Closed reconciliations recorded with difference zero prior to lock. |
| IAS 21 | 9-23 | Identify foreign currency balances and prepare remeasurement suggestions. | FX remeasure endpoint (`apps/web/app/api/fx/remeasure/route.ts`). | Remeasure preview payload stored in ActivityLog (`FX_REMEASURE_PREVIEW` when invoked). |
| IAS 8 / IAS 10 (errors/events) | 5, 41 | Capture audit trail for adjustments via controlled journal batches. | `journal_batches`, `ledger_entries`, journal API workflow. | ActivityLog (`JE_BATCH_CREATED`, `JE_SUBMITTED`, `JE_APPROVED`, `JE_POSTED`). |
| EU Accounting Directive 2013/34/EU | Art. 4-6 | Ensure reliable accounting records and periodic closings. | Close lifecycle schema (`close_period`, `close_pbc_items`) and APIs. | Close status ActivityLog (`CLOSE_ADVANCED`, `CLOSE_LOCKED`), approvals table entries. |
| EU Accounting Directive 2013/34/EU | Art. 36-40 | Management responsibility for internal control and documentation. | PBC template (`CHECKLISTS/ACCOUNTING/close_pbc_template.yaml`), ActivityLog, approvals. | PBC items stored with document links and reviewer status. |
| Malta GAPSME | Regs. 18-27 | SME close discipline matching IFRS-based controls. | Same close workflow applies irrespective of basis; FS basis stored on `fs_lines`. | Evidence identical to IFRS path; basis flag on `fs_lines`/`coa_map`. |
| ISA 330 (audit evidence) | 18-24 | Provide auditors with evidence for controls over financial reporting. | ActivityLog + document management for PBC/reconciliations/journals; ATT manifest utility (`apps/web/lib/audit/evidence.ts`). | Exported schedules, TB snapshots, evidence manifest JSON stored on audit module records. |
| ISA 500 | 6-9 | Maintain complete audit trail for balances and transactions. | Trial balance snapshot table, journaling controls, recon exports. | Snapshot records with totals, ledger entries cross-reference. |
| Internal policy | Close governance policy | Documented responsibilities, controls and approvals. | `/STANDARDS/POLICY/close_governance.md`, approvals enforcement in APIs. | Policy acknowledgement plus approvals recorded in Supabase `approvals`. |
| ISA 300 | 7-12 | Capture and version the overall audit strategy before fieldwork commences. | `public.audit_plans` (`supabase/migrations/20250924095000_audit_plan_strategy_materiality.sql`), strategy upsert API (`supabase/functions/audit-plan/index.ts`), UI (`src/pages/audit/plan.tsx`). | ActivityLog `PLAN_CREATED`/`PLAN_STRATEGY_UPDATED`, plan change log reason `STRATEGY_CREATED/UPDATED`. |
| ISA 320 | 10-14 | Determine FS materiality, performance materiality, and clearly trivial threshold with documented rationale. | `public.materiality_sets`, materiality endpoint (`supabase/functions/audit-plan/index.ts`), planning workspace form (`src/pages/audit/plan.tsx`). | ActivityLog `MATERIALITY_SET`, change log reason `MATERIALITY_UPDATED`, materiality memo export. |
| ISA 220 (Revised) | 24-30 | Require partner (and EQR where applicable) approval before releasing the audit plan. | Approval queue integration (`approval_queue` with kind `AUDIT_PLAN_FREEZE`), approval handler in `supabase/functions/audit-plan/index.ts`. | ActivityLog `PLAN_SUBMITTED`, `PLAN_APPROVED`, `PLAN_LOCKED`; approval queue records resolved with user ids. |
| ISA 230 | 8-9 | Maintain immutable record of plan iterations and approvals. | `public.plan_change_log`, change recording in function handlers, UI change log viewer. | Entries in `plan_change_log` with reason/impact JSON, timestamps, user IDs. |
| Malta Income Tax Act | Cap.123 Art. 41-48 | Compute corporate income tax at 35% and maintain Malta tax accounts (MTA/FIA/IPA/FTA/UA). | `tax_entities`, `tax_accounts`, `cit_computations`, compute endpoint (`supabase/functions/tax-mt-cit/index.ts`). | ActivityLog `MT_CIT_COMPUTED`, tax account movements JSON (period/amount/user). |
| Malta Income Tax Act | Cap.123 Art. 48(4), Refund guidelines | Track shareholder refund entitlements (6/7ths, 5/7ths, 2/3rds) and approval workflow. | Refund profile handling in CIT compute; approval queue kind `MT_CIT_APPROVAL`; status transitions in function handler. | ActivityLog `MT_CIT_APPROVAL_SUBMITTED`, `MT_CIT_APPROVED`, approval_queue row with resolution metadata. |
| ISA 220 (Revised) | 29-33 | Require partner approval before releasing tax computations to filing. | `/tax-mt-cit/submit` + `/tax-mt-cit/approve` endpoints, approval queue enforcement. | Approval record with partner user id, decision, note; computation status locked to `APPROVED`. |
| ISA 230 | 8-11 | Preserve tax return schedules and supporting documentation. | `return_files` table storing payload_meta; prepare-return endpoint; UI preview. | Return file JSON snapshot + document id when exported, ActivityLog `MT_CIT_RETURN_READY`. |

| ISA 315 (Revised) | 19-32 | Document identified risks of material misstatement with categorisation, assertions, and analytics linkage. | `public.audit_risks`, `public.audit_risk_signals`, `public.audit_risk_activity` (`supabase/migrations/20250924120000_audit_risk_register.sql`); Supabase types updated in `supabase/src/integrations/supabase/types.ts`. | ActivityLog enriched with policy pack `AP-GOV-1`, risk activity rows tracking actions/notes, analytics summary JSON snapshots. |
| ISA 315 (Revised) | 12-23, 26-29 | Maintain controls register with cycle, objective, frequency, and key designation tied to engagements. | `public.controls` schema (`supabase/sql/audit_CTRL1_schema.sql`), create/update/list APIs (`apps/web/app/api/controls/*`). | ActivityLog entries (`CTRL_ADDED`, `CTRL_UPDATED`), control rows with timestamps. |
| ISA 330 | 18-26 | Document walkthrough procedures and attributes testing results for key controls with sample sizes ≥25. | Walkthrough/testing tables (`control_walkthroughs`, `control_tests`), Sampling C1 integration (`apps/web/lib/audit/sampling-client.ts`, `/api/controls/test/run`), audit workspace UI (`apps/web/app/audit/controls/page.tsx`). | Walkthrough/test inserts linked to user ids; sampling plans stored with source + population refs; ActivityLog `CTRL_TEST_RUN` metadata incl. sample size/exceptions. |
| ISA 330 | 7-29 | Design and document planned responses linking risks to controls, analytics, and substantive procedures. | `public.audit_responses`, `public.audit_response_checks` (`supabase/migrations/20250924124000_audit_responses_matrix.sql`), edge function `supabase/functions/audit-responses/index.ts`, UI planner page (to be added). | ActivityLog `RESPONSE_*` records, completeness checks stored with reviewer id and timestamp. |
| ISA 240 | 15-32, 47 | Capture fraud brainstorming outcomes, inherent fraud risks, responses, and journal-entry strategy. | `public.fraud_plans`, `public.fraud_plan_actions`, `public.journal_entry_strategies` (`supabase/migrations/20250924130000_fraud_plan_je_strategy.sql`); Supabase types updated. | ActivityLog planned (`FRAUD_PLAN_*`), fraud plan approvals, JE filters. |
| ISA 265 | 7-11 | Escalate control deficiencies with severity and recommendation to TCWG reporting packs. | `public.deficiencies` schema, auto-creation in test run route (`apps/web/app/api/controls/test/run/route.ts`), manual deficiency endpoint. | ActivityLog (`CTRL_DEFICIENCY_RAISED`), deficiency status stored with recommendation text, TCWG panel evidence. |
| ITGC coverage | ISA 315.A128, ISA 330.A44 | Track supporting access/change/operations ITGC groups for audit cycles. | `public.itgc_groups` schema and inclusion in controls API response; UI ITGC panel. | ITGC group rows linked to engagement with scope/notes. |
| Firm policy | Audit controls governance | Documented methodology for controls register, walkthroughs, testing, and deficiency workflow. | `/STANDARDS/POLICY/audit_controls_itgc.md`. | Policy referencing ISA 315/330/265, alignments noted in governance pack. |
| ISA 500 / ISA 520 | 6-12, 5-7 | Run deterministic analytics with dataset lineage, parameters, and exception capture. | `public.ada_runs`, `public.ada_exceptions`, analytics engine (`apps/web/lib/audit/analytics-engine.ts`), API routes (`apps/web/app/api/ada/run/route.ts`, `apps/web/app/api/ada/exception/update/route.ts`). | ActivityLog (`ADA_RUN_STARTED`, `ADA_RUN_COMPLETED`, `ADA_EXCEPTION_ADDED`), run summary JSON with dataset hash and sample list for sampling/TCWG. |
| IAASB ATT | 14-18 | Preserve ATT evidence packs (inputs, procedures, outputs, exceptions) for analytics. | ADA workspace UI (`apps/web/app/audit/analytics/page.tsx`) with CSV export and sampling hand-off, policy note (`/STANDARDS/POLICY/audit_analytics_kernel.md`). | Exported CSV artefacts, dataset hash + parameters in `ada_runs.summary`, exception trail with dispositions (`ADA_EXCEPTION_RESOLVED`). |

> Evidence references assume archive hooks (A-1 scope) capture document ids and ActivityLog entries upon completion.
