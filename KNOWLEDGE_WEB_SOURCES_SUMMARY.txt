â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    KNOWLEDGE WEB SOURCES - COMPLETE                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… WHAT WAS CREATED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. DATABASE MIGRATION (33KB)
   ğŸ“„ supabase/migrations/20251201_knowledge_web_sources_200_urls.sql
   
   âœ“ Creates knowledge_web_sources table
   âœ“ Seeds 200 curated URLs across 12 categories
   âœ“ 6 performance indexes
   âœ“ Check constraints on authority_level and status
   
   Categories seeded:
   â€¢ 12 IFRS Foundation URLs (ifrs.org)
   â€¢ 14 IAASB/IESBA/IFAC URLs (iaasb.org, ethicsboard.org, ifac.org)
   â€¢ 24 Big4 URLs (KPMG, PwC, Deloitte/IAS Plus, EY)
   â€¢ 8 OECD Tax URLs (oecd.org)
   â€¢ 19 Malta URLs (CFR, MBR, MFSA, FIAU)
   â€¢ 15 Rwanda URLs (RRA, RDB, BNR, Parliament)
   â€¢ 108 additional global sources (tax authorities, professional bodies, etc.)

2. TYPESCRIPT HELPERS (14KB)
   ğŸ“„ packages/lib/src/knowledge-web-sources.ts
   
   âœ“ Type-safe interfaces for all operations
   âœ“ 10 query helpers (getActiveSources, getPrimarySources, etc.)
   âœ“ 6 mutation helpers (createSource, updateSource, toggleStatus, etc.)
   âœ“ 3 analytics helpers (getCrawlStats, category/jurisdiction counts)
   âœ“ Full JSDoc documentation
   
   Example usage:
   ```typescript
   import { getActiveDomains } from '@/packages/lib/src/knowledge-web-sources';
   const domains = await getActiveDomains(supabase);
   // Returns: ['ifrs.org', 'iaasb.org', 'kpmg.com', ...]
   ```

3. INTEGRATION GUIDE (13KB)
   ğŸ“„ docs/KNOWLEDGE_WEB_SOURCES_GUIDE.md
   
   âœ“ Complete setup instructions
   âœ“ Usage examples for DeepSearch, admin panel, crawler
   âœ“ API endpoint templates
   âœ“ Maintenance queries
   âœ“ Best practices and troubleshooting
   âœ“ RLS policy examples

4. QUICK START README (8KB)
   ğŸ“„ README_KNOWLEDGE_WEB_SOURCES.md
   
   âœ“ Quick start instructions
   âœ“ Schema documentation
   âœ“ Common operations
   âœ“ Integration points
   âœ“ Verification queries

5. VERIFICATION SCRIPT (5KB)
   ğŸ“„ scripts/verify-knowledge-sources.sh
   
   âœ“ Checks table exists
   âœ“ Verifies row count (200)
   âœ“ Tests indexes
   âœ“ Runs sample queries
   âœ“ Outputs summary report

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš€ QUICK START
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

STEP 1: Apply Migration
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Option A (Recommended): Direct psql
  $ export DATABASE_URL='postgresql://user:pass@host:port/dbname'
  $ psql "$DATABASE_URL" -f supabase/migrations/20251201_knowledge_web_sources_200_urls.sql

Option B: Supabase CLI
  $ supabase db push

Option C: Supabase Studio
  â†’ Upload SQL file in SQL Editor
  â†’ Execute


STEP 2: Verify Installation
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Run verification script:
  $ ./scripts/verify-knowledge-sources.sh

Or manually check:
  $ psql "$DATABASE_URL" -c "SELECT COUNT(*) FROM knowledge_web_sources;"
  # Should return: 200


STEP 3: Integrate with Your Code
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TypeScript example:
  import { getActiveDomains, getPrimarySources } from '@/packages/lib/src/knowledge-web-sources';
  
  // Get domains for crawler whitelist
  const domains = await getActiveDomains(supabase);
  
  // Get IFRS primary sources
  const ifrs = await getPrimarySources(supabase, { category: 'IFRS' });

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š DATA SUMMARY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Total URLs:           200
Unique domains:       ~80-90
Authority levels:
  â€¢ PRIMARY:          ~70-80 (official standards bodies)
  â€¢ SECONDARY:        ~120-130 (interpretive guidance)
  â€¢ INTERNAL:         0 (reserved for future use)

Categories:
  IFRS               ~30    IFRS Foundation, IAS Plus, Big4 IFRS
  TAX                ~60    OECD, Malta CFR, Rwanda RRA, global authorities
  ISA                ~14    IAASB audit standards
  BIG4               ~24    KPMG, PwC, Deloitte, EY insights
  PRO                ~11    ACCA, AICPA, CPA Canada, ICAEW
  REG                ~15    MFSA, ESMA, SEC, PCAOB, FRC
  ETHICS             ~4     IESBA Code of Ethics
  RESEARCH           ~5     Google Scholar, JSTOR, SSRN
  Others             ~37    ESG, Law, Banking, Insurance, Tech

Jurisdictions:
  GLOBAL             140    International standards, Big4
  MT (Malta)         19     CFR, MBR, MFSA, FIAU
  RW (Rwanda)        15     RRA, RDB, BNR, Parliament
  US/UK/CA/AU/EU     26     Tax authorities, regulators

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ TABLE SCHEMA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CREATE TABLE knowledge_web_sources (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    name text NOT NULL,                  -- "IFRS - Issued Standards"
    url text NOT NULL,                   -- "https://www.ifrs.org/issued-standards/"
    domain text NOT NULL,                -- "ifrs.org"
    category text NOT NULL,              -- "IFRS", "TAX", "ISA", etc.
    jurisdiction_code text DEFAULT 'GLOBAL',  -- "GLOBAL", "RW", "MT"
    authority_level text NOT NULL DEFAULT 'SECONDARY'
        CHECK (authority_level IN ('PRIMARY', 'SECONDARY', 'INTERNAL')),
    status text NOT NULL DEFAULT 'ACTIVE'
        CHECK (status IN ('ACTIVE', 'INACTIVE')),
    priority int NOT NULL DEFAULT 1,     -- 1=core, higher=less important
    tags text[] DEFAULT '{}',            -- ['ifrs', 'standards']
    notes text,
    last_crawled_at timestamptz,
    created_by uuid,
    updated_by uuid,
    created_at timestamptz NOT NULL DEFAULT now(),
    updated_at timestamptz NOT NULL DEFAULT now()
);

Indexes:
  â€¢ idx_kws_domain
  â€¢ idx_kws_category
  â€¢ idx_kws_jurisdiction
  â€¢ idx_kws_status
  â€¢ idx_kws_authority_level
  â€¢ idx_kws_priority

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¡ COMMON USE CASES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. DeepSearch Integration
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Query active domains for web search whitelist:
   
   const domains = await getActiveDomains(supabase);
   // Use in your search configuration

2. Admin Panel
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   List/edit sources:
   
   const sources = await getActiveSources(supabase, { category: 'TAX' });
   await toggleSourceStatus(supabase, sourceId);

3. Crawler Pipeline
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Get sources needing crawl:
   
   const batch = await getSourcesNeedingCrawl(supabase, 7, 100);
   for (const source of batch) {
     await crawlUrl(source.url);
     await markSourceCrawled(supabase, source.id);
   }

4. RAG Ingestion
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Prioritize official sources:
   
   const coreSources = await getPrimarySources(supabase, { priority: 1 });
   // Ingest these first

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š DOCUMENTATION FILES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. README_KNOWLEDGE_WEB_SOURCES.md
   Quick start guide with examples

2. docs/KNOWLEDGE_WEB_SOURCES_GUIDE.md
   Complete integration guide with:
   â€¢ Setup instructions
   â€¢ Usage examples (DeepSearch, admin, crawler)
   â€¢ API endpoint templates
   â€¢ Maintenance queries
   â€¢ Best practices
   â€¢ Troubleshooting

3. packages/lib/src/knowledge-web-sources.ts
   TypeScript helper module with:
   â€¢ Type-safe interfaces
   â€¢ Query helpers (10 functions)
   â€¢ Mutation helpers (6 functions)
   â€¢ Analytics helpers (3 functions)
   â€¢ Full JSDoc documentation

4. scripts/verify-knowledge-sources.sh
   Automated verification script

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… VERIFICATION CHECKLIST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–¡ Migration file created (20251201_knowledge_web_sources_200_urls.sql)
â–¡ TypeScript helpers created (packages/lib/src/knowledge-web-sources.ts)
â–¡ Documentation created (docs/, README_KNOWLEDGE_WEB_SOURCES.md)
â–¡ Verification script created (scripts/verify-knowledge-sources.sh)

Next steps:
â–¡ Apply migration to database
â–¡ Run verification script
â–¡ Integrate with DeepSearch
â–¡ Build admin panel UI
â–¡ Configure crawler
â–¡ Set up RLS policies (optional)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ KEY BENEFITS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ Centralized source management
  â†’ All 200 URLs in one table
  â†’ Easy to add/edit/deactivate sources

âœ“ Dynamic configuration
  â†’ No hardcoded URLs in code
  â†’ Query sources by category, jurisdiction, priority

âœ“ Crawl tracking
  â†’ Track last_crawled_at timestamps
  â†’ Identify sources needing refresh

âœ“ Type-safe operations
  â†’ TypeScript helpers with full types
  â†’ JSDoc documentation

âœ“ Admin-friendly
  â†’ Simple CRUD operations
  â†’ Toggle active/inactive status
  â†’ Bulk updates

âœ“ Flexible filtering
  â†’ By category (IFRS, TAX, ISA, etc.)
  â†’ By jurisdiction (GLOBAL, RW, MT, etc.)
  â†’ By authority level (PRIMARY, SECONDARY)
  â†’ By tags (array search)
  â†’ By priority (1=core, 2=important, etc.)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Created: 2025-12-01
Status: âœ… Ready to apply
Migration: 20251201_knowledge_web_sources_200_urls.sql

For questions or issues, see:
  â€¢ docs/KNOWLEDGE_WEB_SOURCES_GUIDE.md â†’ Troubleshooting
  â€¢ README_KNOWLEDGE_WEB_SOURCES.md â†’ Quick Start

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
