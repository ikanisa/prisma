########################################
# Core runtime configuration
########################################
NODE_ENV="development"
ENVIRONMENT="development"
PORT="3000"
SERVICE_VERSION=""
OTEL_SERVICE_NAME="gateway"
OTEL_EXPORTER_OTLP_ENDPOINT="https://otel-collector.example.com" # optional
SENTRY_DSN="https://examplePublicKey@sentry.io/12345" # optional global fallback
WEB_SENTRY_DSN="https://examplePublicKey@sentry.io/67890" # optional Next.js server DSN
NEXT_PUBLIC_SENTRY_DSN="https://examplePublicKey@sentry.io/67890" # optional browser DSN mirrored from WEB_SENTRY_DSN
GATEWAY_SENTRY_DSN="https://examplePublicKey@sentry.io/13579" # optional gateway DSN
SENTRY_ENVIRONMENT="development"
SENTRY_RELEASE=""
ALLOW_SENTRY_DRY_RUN="false"

########################################
# Database connectivity (names only, values managed in secrets managers)
########################################
DATABASE_URL="postgresql://user:password@host:5432/db"
DIRECT_URL="postgresql://user:password@host:5432/db?pgbouncer=true" # optional pooled connection
SKIP_HEALTHCHECK_DB="false"
RECONCILIATION_MODE="db"

########################################
# Gateway / API platform configuration
########################################
API_BASE_URL="http://localhost:3001"
FASTAPI_BASE_URL="http://localhost:8000"
API_ALLOWED_ORIGINS="http://localhost:3000,http://localhost:5173"
ALLOWED_HOSTS="app.prismaglow.example.com"
REDIS_URL="redis://localhost:6379"
CACHE_KEY_PREFIX="cache:"
CACHE_DEFAULT_TTL_SECONDS="60"
CACHE_TTL_GROUP_INSTRUCTIONS="120"
CACHE_TTL_GROUP_INSTRUCTIONS_INDEX="300"
GATEWAY_API_KEYS="key1,key2"
API_KEYS="key1,key2"
AGENT_SERVICE_URL="https://agent-service.internal"
AGENT_SERVICE_API_KEY="agent-service-key"
RAG_SERVICE_URL="https://rag-service.internal"
RAG_SERVICE_API_KEY="rag-service-key"
AUTOMATION_WEBHOOK_SECRET="automation-secret"
N8N_WEBHOOK_SECRET="n8n-secret"
EMBEDDING_CRON_SECRET="cron-secret"
EMBEDDING_DELTA_LOOKBACK_HOURS="24"
EMBEDDING_DELTA_DOCUMENT_LIMIT="50"
EMBEDDING_DELTA_POLICY_LIMIT="25"
TELEMETRY_ALERT_WEBHOOK="https://hooks.example.com/telemetry" # optional
EMBEDDING_ALERT_WEBHOOK="https://hooks.example.com/embedding" # optional
SIGNED_URL_DEFAULT_TTL_SECONDS="300"
SIGNED_URL_EVIDENCE_TTL_SECONDS="300"
API_RATE_LIMIT="60"
API_RATE_WINDOW_SECONDS="60"
RATE_LIMIT_ALERT_WEBHOOK="https://hooks.prismaglow.example.com/rate-limit" # optional
ERROR_NOTIFY_WEBHOOK="https://hooks.prismaglow.example.com/error-notify" # optional

########################################
# Authentication & external service configuration
########################################
AUTH_CLIENT_ID="your-auth-client-id"
AUTH_CLIENT_SECRET="your-auth-client-secret"
AUTH_ISSUER="https://auth.example.com"
SAMPLING_C1_BASE_URL="http://localhost:4005/api/sampling"
SAMPLING_C1_API_KEY="sampling-service-key"
ALLOW_DEMO_BOOTSTRAP="false"
DEMO_BOOTSTRAP_AUTH_TOKEN=""
SEED_DATA_AUTH_TOKEN=""
VITE_ENABLE_CAPTCHA="false"
VITE_ENABLE_PWNED_PASSWORD_CHECK="true"
VITE_TURNSTILE_SITE_KEY=""
NEXT_PUBLIC_TURNSTILE_SITE_KEY=""
TURNSTILE_SECRET_KEY=""
SMTP_HOST=""
SMTP_PORT="587"
SMTP_USERNAME=""
SMTP_PASSWORD=""
SMTP_FROM_EMAIL="no-reply@prismaglow.com"
SMTP_FROM_NAME="Prisma Glow"
SMTP_USE_SSL="false"
SMTP_USE_STARTTLS="true"
SMTP_TIMEOUT_SECONDS="10"
INVITE_ACCEPT_BASE_URL="https://app.prismaglow.example.com/auth/accept-invite"

########################################
# Supabase configuration
########################################
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="<ROTATED_SERVICE_ROLE_KEY>"
SUPABASE_JWT_SECRET="jwt-secret"
SUPABASE_JWT_AUDIENCE="authenticated"
SUPABASE_ALLOW_STUB="false"
SUPABASE_VAULT_PATH="apps/prisma-glow-15/supabase"
SUPABASE_SERVICE_ROLE_VAULT_FIELD="service_role_key"
SUPABASE_JWT_VAULT_FIELD="jwt_secret"

########################################
# Managed encryption (CMEK/KMS)
########################################
SUPABASE_ENCRYPTION_PROVIDER="aws"
SUPABASE_ENCRYPTION_KEY_REFERENCE=""
OBJECT_STORAGE_ENCRYPTION_PROVIDER="aws"
OBJECT_STORAGE_ENCRYPTION_KEY_REFERENCE=""
JOB_QUEUE_ENCRYPTION_PROVIDER="aws"
JOB_QUEUE_ENCRYPTION_KEY_REFERENCE=""

########################################
# Vault & secret management
########################################
VAULT_ADDR="https://vault.internal:8200"
VAULT_TOKEN="<DEVELOPMENT_TOKEN>"
VAULT_KV_MOUNT="secret"

########################################
# Hosted web configuration (Next.js public env)
########################################
NEXT_PUBLIC_API_BASE="https://api.example.com"
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="<ROTATED_ANON_KEY>"
NEXT_PUBLIC_ACCOUNTING_MODE="close"
NEXT_PUBLIC_RECONCILIATION_MODE="db"
NEXT_PUBLIC_GROUP_AUDIT_MODE="workspace"
NEXT_PUBLIC_DEMO_ORG_ID="demo-org"
NEXT_PUBLIC_DEMO_ENGAGEMENT_ID="demo-engagement"
NEXT_PUBLIC_DEMO_USER_ID="demo-user"

########################################
# Legacy Vite client configuration
########################################
VITE_SUPABASE_URL="https://your-project.supabase.co"
VITE_SUPABASE_PROJECT_ID="your-project-id"
VITE_SUPABASE_PUBLISHABLE_KEY="<ROTATED_ANON_KEY>"
VITE_API_BASE_URL="http://localhost:3001"
ADMIN_HOSTNAME="admin.sacco-plus.com"
VITE_ENABLE_DEMO_LOGIN="false"
VITE_ENABLE_PWA="true"
VITE_TRACKING_ENABLED="true"

########################################
# OpenAI platform configuration
########################################
OPENAI_API_KEY="sk-your-key"
OPENAI_RPM="60"
OPENAI_WEB_SEARCH_ENABLED="false"
OPENAI_WEB_SEARCH_MODEL="gpt-4.1-mini"
WEB_FETCH_CACHE_RETENTION_DAYS="14"
OPENAI_DEBUG_LOGGING="false"
OPENAI_DEBUG_FETCH_DETAILS="false"
OPENAI_AGENT_PLATFORM_ENABLED="false"
OPENAI_AGENT_ID="agent_123456"
OPENAI_STREAMING_ENABLED="false"
OPENAI_REALTIME_ENABLED="false"
OPENAI_REALTIME_MODEL="gpt-4o-realtime-preview"
OPENAI_REALTIME_VOICE="verse"
OPENAI_REALTIME_TURN_SERVERS="" # optional JSON array or comma-delimited list of TURN servers
OPENAI_TRANSCRIPTION_MODEL="gpt-4o-mini-transcribe"
OPENAI_TTS_MODEL="gpt-4o-mini-tts"
OPENAI_TTS_VOICE="alloy"
OPENAI_TTS_FORMAT="mp3"
OPENAI_STREAMING_TOOL_ENABLED="false"
OPENAI_SORA_ENABLED="false"
OPENAI_SORA_MODEL="sora-2"
OPENAI_SORA_ASPECT_RATIO="16:9"
OPENAI_ORCHESTRATOR_ENABLED="false"
ORCHESTRATION_POLL_INTERVAL_MS="15000"
# Managed Retrieval configuration (set either ID **or** NAME)
OPENAI_RETRIEVAL_VECTOR_STORE_ID="vs_your-store-id"
OPENAI_RETRIEVAL_VECTOR_STORE_NAME="prisma-glow-knowledge"

########################################
# Hosted file search (RAG service)
########################################
OPENAI_FILE_SEARCH_VECTOR_STORE_ID="vs_your-vector-store-id"
OPENAI_FILE_SEARCH_MODEL="gpt-4.1-mini"
OPENAI_FILE_SEARCH_MAX_RESULTS="8"
OPENAI_FILE_SEARCH_FILTERS=""
OPENAI_FILE_SEARCH_INCLUDE_RESULTS="true"

########################################
# Google Sheets configuration (scope: https://www.googleapis.com/auth/spreadsheets)
########################################
GOOGLE_SERVICE_ACCOUNT_KEY_PATH="./service-account.json"
GOOGLE_SHEET_ID="your_sheet_id"

########################################
# Google Drive ingestion (service account only)
########################################
GDRIVE_FOLDER_ID="drive-folder-id"
GDRIVE_SHARED_DRIVE_ID=""
GDRIVE_SERVICE_ACCOUNT_EMAIL="svc-avocat-drive@project.iam.gserviceaccount.com"
GDRIVE_SERVICE_ACCOUNT_KEY="{\"type\":\"service_account\",...}"
GDRIVE_WATCH_CHANNEL_TOKEN="local-dev-token"

########################################
# Assistant & knowledge rate limiting
########################################
ASSISTANT_RATE_LIMIT="20"
ASSISTANT_RATE_WINDOW_SECONDS="60"
DOCUMENT_UPLOAD_RATE_LIMIT="12"
DOCUMENT_UPLOAD_RATE_WINDOW_SECONDS="300"
KNOWLEDGE_RUN_RATE_LIMIT="6"
KNOWLEDGE_RUN_RATE_WINDOW_SECONDS="900"
KNOWLEDGE_PREVIEW_RATE_LIMIT="30"
KNOWLEDGE_PREVIEW_RATE_WINDOW_SECONDS="300"
RAG_INGEST_RATE_LIMIT="5"
RAG_INGEST_RATE_WINDOW_SECONDS="600"
RAG_REEMBED_RATE_LIMIT="5"
RAG_REEMBED_RATE_WINDOW_SECONDS="600"
RAG_SEARCH_RATE_LIMIT="40"
RAG_SEARCH_RATE_WINDOW_SECONDS="60"
AUTOPILOT_SCHEDULE_RATE_LIMIT="10"
AUTOPILOT_SCHEDULE_RATE_WINDOW_SECONDS="600"
AUTOPILOT_JOB_RATE_LIMIT="20"
AUTOPILOT_JOB_RATE_WINDOW_SECONDS="600"

########################################
# Optional CSP overrides (space-separated origins)
########################################
# CSP_ADDITIONAL_CONNECT_SRC="https://api.third-party.com"
# CSP_ADDITIONAL_IMG_SRC="https://cdn.example.com"

########################################
# Finance Review System (CFO + Auditor AI)
########################################
# DEFAULT_ORG_ID is used for testing/dev when no org_id is specified
DEFAULT_ORG_ID="00000000-0000-0000-0000-000000000000"
# EMBEDDING_MODEL for semantic search (OpenAI)
EMBEDDING_MODEL="text-embedding-3-small"
# CHAT_MODEL for agent completions (OpenAI)
CHAT_MODEL="gpt-4o-mini"
