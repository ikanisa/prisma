# Software Bill of Materials (SBOM)

This directory contains CycloneDX-format Software Bill of Materials (SBOM) for the Prisma Glow platform.

## Files

### Generated SBOMs

- **prisma-backend-python.json** - Python backend dependencies (FastAPI, server/)
  - Format: CycloneDX 1.6 JSON
  - Components: 26 Python packages
  - Generated from: `server/requirements.txt`

### Planned SBOMs (Generated in CI)

- **prisma-root-node.json** - Root workspace Node.js dependencies
- **prisma-web.json** - Next.js web application (apps/web)
- **prisma-gateway.json** - Express.js gateway (apps/gateway)
- **prisma-rag.json** - RAG service (services/rag)
- **prisma-analytics.json** - Analytics service (analytics/)
- **prisma-agent.json** - Agent service (agent/)

## Generation

SBOMs are automatically generated by the `.github/workflows/sbom.yml` workflow:

- **Trigger**: Push to main, releases, tags, manual dispatch
- **Artifacts**: Stored for 90 days
- **Commit**: Automatically committed on main branch

### Manual Generation

**Python (Backend)**:
```bash
pip install cyclonedx-bom
cyclonedx-py requirements --of JSON -o docs/sbom/prisma-backend-python.json server/requirements.txt
```

**Node.js (Workspaces)**:
```bash
# Note: Requires npm package-lock.json (pnpm-lock.yaml not supported)
# Use CI workflow for automated generation
npx @cyclonedx/cyclonedx-npm --output-format JSON --output-file docs/sbom/prisma-root-node.json
```

## Usage

### Vulnerability Scanning

Use SBOMs with vulnerability scanning tools:

```bash
# With Grype
grype sbom:docs/sbom/prisma-backend-python.json

# With Trivy
trivy sbom docs/sbom/prisma-backend-python.json

# With OWASP Dependency-Check
dependency-check --scan docs/sbom/prisma-backend-python.json
```

### License Compliance

Extract license information:

```bash
# Using jq
jq '.components[] | {name: .name, version: .version, licenses: .licenses}' docs/sbom/prisma-backend-python.json
```

### Supply Chain Analysis

- Track component origins (PURLs)
- Identify transitive dependencies
- Monitor for supply chain risks
- Verify component integrity

## SBOM Format

All SBOMs follow the **CycloneDX 1.6** specification:
- **Format**: JSON
- **Specification**: https://cyclonedx.org/specification/overview/
- **Schema**: https://cyclonedx.org/docs/1.6/json/

## Validation

Validate SBOM files:

```bash
# Check JSON syntax
jq empty docs/sbom/*.json

# Validate against CycloneDX schema (requires cyclonedx-cli)
cyclonedx validate --input-file docs/sbom/prisma-backend-python.json
```

## Retention

- **CI Artifacts**: 90 days
- **Git Repository**: Indefinite (committed to main)
- **Production Releases**: 365 days (for tagged releases)

## Security

SBOMs may contain information about dependencies but should NOT contain:
- Secrets or credentials
- Internal network topology
- Proprietary source code
- Personally identifiable information (PII)

## Support

For questions about SBOMs:
- See [Go-Live Readiness Report](../go-live-readiness-report.md)
- Check [SBOM Workflow](.github/workflows/sbom.yml)
- Contact: devops@prismaglow.com

## References

- [CycloneDX Specification](https://cyclonedx.org/)
- [NTIA Minimum Elements for SBOM](https://www.ntia.gov/report/2021/minimum-elements-software-bill-materials-sbom)
- [OWASP Dependency-Track](https://dependencytrack.org/)
- [GitHub Dependency Graph](https://docs.github.com/en/code-security/supply-chain-security/understanding-your-software-supply-chain/about-the-dependency-graph)

---

**Last Updated**: 2025-10-29  
**Workflow**: `.github/workflows/sbom.yml`
