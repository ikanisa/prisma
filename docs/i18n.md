# Internationalisation (i18n)

The application ships with an opinionated i18n skeleton:

- Available locales live in `src/i18n/translations.ts`. Add new language codes and
  translation entries there.
- The `I18nProvider` persists the active locale in localStorage
  (`prismaglow-locale`) and exposes a `t(key, vars)` helper.
- Global access is via `useI18n()`; components already using it include the header,
  tasks page, documents page, and onboarding flows.
- The locale switcher (`src/components/locale-switcher.tsx`) appears in the header and
  maps to the provider context.

## Adding a translation
1. Extend `AVAILABLE_LOCALES` with a `{ code, label }` pair.
2. Populate the `TranslationRecord` for the locale.
3. Use `const { t } = useI18n()` in the component and replace hard-coded strings with
   `t('namespace.key')`.
4. Run `npm test` to ensure components still render (Vitest + RTL use the provider).

## Server-rendered routes
- Edge/API routes should avoid user-facing strings or rely on `t` when the locale is
  passed explicitly (future enhancement).

## CLI snippets
```bash
# Highlight missing keys (simple example)
rg "t\('" src | sort | uniq > /tmp/t-used.txt
rg "'t\." src/i18n/translations.ts | sort | uniq > /tmp/t-defined.txt
comm -23 /tmp/t-used.txt /tmp/t-defined.txt
```

## Next steps
- Capture translation ownership per module and add automation to surface missing keys.
- Consider integrating a localization platform if more languages are required.
