SUMMARY:
- pnpm test (vitest) failed: 4 failing tests across telemetry dashboard UI (unable to render "Coverage ratios" and totals.events TypeError) and RAG OpenAI client lazy loading (missing OPENAI_API_KEY env).
- Supabase notification fanout worker threw unhandled .lte() errors during the run.
- Overall 329/333 tests passed before failures halted the suite.

â€‰WARNâ€‰ Unsupported engine: wanted: {"node":"18.20.4"} (current: {"node":"v20.19.4","pnpm":"9.12.3"})

> vite_react_shadcn_ts@0.0.0 test /workspace/prisma
> vitest run


 RUN  v3.2.4 /workspace/prisma

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"rag.search","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.risk_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.evidence_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"policy_check","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"db.read","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"trial_balance.get","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"document.vision_ocr","provider":"openai"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"notify.user","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.reconciliation_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.journal_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.close_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"director.core","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"safety.core","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"audit.execution","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"accounting.close","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.tax","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.accounts_payable","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.cfo","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.corporate","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.risk","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"tax.compliance","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"advisory.consulting","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"client.collaboration","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"rag.search","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.risk_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.evidence_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"policy_check","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"db.read","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"trial_balance.get","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"document.vision_ocr","provider":"openai"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"notify.user","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.reconciliation_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.journal_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.close_summary","provider":"supabase"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"director.core","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"safety.core","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"audit.execution","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"accounting.close","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.tax","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.accounts_payable","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.cfo","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.corporate","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.risk","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"tax.compliance","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"advisory.consulting","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"client.collaboration","version":"2025-01-15.v1"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts > OpenAI chat completion proxy endpoints > creates a stored chat completion and logs Supabase debug metadata
{"level":"info","msg":"openai.debug_event_recorded","responseId":"chat_123","endpoint":"chat.completions.create","tags":["alpha","endpoint:chat.completions.create","env:test","model:gpt-test","org:org-1","proxy-tests","service:rag-service"],"quotaTag":"quota-a"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts > OpenAI chat completion proxy endpoints > retrieves a stored completion by id
{"level":"info","msg":"openai.debug_event_recorded","responseId":"chat_42","endpoint":"chat.completions.retrieve","tags":["endpoint:chat.completions.retrieve","env:test","org:org-1","proxy-tests","service:rag-service"],"quotaTag":"quota-integration"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts > OpenAI chat completion proxy endpoints > updates metadata on a stored completion
{"level":"info","msg":"openai.debug_event_recorded","responseId":"chat_55","endpoint":"chat.completions.update","tags":["endpoint:chat.completions.update","env:test","org:org-1","proxy-tests","service:rag-service"],"quotaTag":"quota-integration"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts > OpenAI chat completion proxy endpoints > deletes a stored completion
{"level":"info","msg":"openai.debug_event_recorded","responseId":"chat_77","endpoint":"chat.completions.delete","tags":["endpoint:chat.completions.delete","env:test","org:org-1","proxy-tests","service:rag-service"],"quotaTag":"quota-integration"}

stdout | tests/api/openai-chat-completions-endpoints.test.ts > OpenAI chat completion proxy endpoints > lists stored messages for a completion
{"level":"info","msg":"openai.debug_event_recorded","responseId":"chat_90","endpoint":"chat.completions.messages.list","tags":["endpoint:chat.completions.messages.list","env:test","org:org-1","proxy-tests","service:rag-service"],"quotaTag":"quota-integration"}

 âœ“ tests/api/openai-chat-completions-endpoints.test.ts (9 tests) 4542ms
 âœ“ tests/reporting/kam-reporting-page.test.tsx (2 tests) 2368ms
   âœ“ KamReportingPage workflow > covers candidate, drafting, approval, and export interactions  2120ms
 âœ“ tests/web/agent-proxy.test.ts (9 tests) 536ms
 âœ“ tests/config/system-config.test.ts (32 tests) 56ms
 âœ“ tests/tax/calculators.test.ts (17 tests) 25ms
stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"rag.search","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.risk_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.evidence_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"policy_check","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"db.read","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"trial_balance.get","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"document.vision_ocr","provider":"openai"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"notify.user","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.reconciliation_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.journal_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.close_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"director.core","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"safety.core","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"audit.execution","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"accounting.close","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.tax","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.accounts_payable","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.cfo","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.corporate","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.risk","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"tax.compliance","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"advisory.consulting","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"client.collaboration","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"rag.search","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.risk_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"audit.evidence_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"policy_check","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"db.read","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"trial_balance.get","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"document.vision_ocr","provider":"openai"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"notify.user","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.reconciliation_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.journal_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.tool_upserted","toolKey":"accounting.close_summary","provider":"supabase"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"director.core","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"safety.core","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"audit.execution","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"accounting.close","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.tax","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.accounts_payable","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.cfo","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.corporate","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"finance.risk","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"tax.compliance","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"advisory.consulting","version":"2025-01-15.v1"}

stdout | tests/api/learning-endpoints.test.ts
{"level":"info","msg":"mcp.agent_manifest_upserted","agentKey":"client.collaboration","version":"2025-01-15.v1"}

 âœ“ tests/api/learning-endpoints.test.ts (4 tests) 2122ms
 âœ“ tests/telemetry/telemetry-sync-edge.test.ts (6 tests) 108ms
 âœ“ tests/reporting/controls-matrix-page.test.tsx (2 tests) 2117ms
   âœ“ ControlsMatrixPage workflow > captures control, walkthrough, testing, deficiency, and ITGC interactions  1867ms
 âœ“ tests/audit/module-records.test.ts (5 tests) 31ms
 âœ“ tests/reporting/report-builder-page.test.tsx (2 tests) 1252ms
   âœ“ ReportBuilderPage workflow > saves updates, evaluates decision tree, and refreshes notes  1118ms
 âœ“ tests/archive/archive-sync-edge.test.ts (8 tests) 79ms
 âœ“ tests/openai-conversations.test.ts (10 tests) 94ms
 âœ“ tests/web/agent-api.test.ts (6 tests) 222ms
 âœ“ tests/api/group-instruction-route.test.ts (4 tests) 92ms
 âœ“ tests/api/group-review-route.test.ts (3 tests) 47ms
 âœ“ tests/api/group-workpaper-route.test.ts (2 tests) 60ms
 âœ“ tests/telemetry/error-notify-edge.test.ts (6 tests) 55ms
stderr | tests/telemetry/dashboard-page.test.tsx > TelemetryDashboardPage > shows loading state then renders telemetry metrics
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'events')]
    at reportException (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'events')
    at [90m/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:391:44
    at TelemetryDashboardPage [90m(/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:427:15[90m)[39m
    at renderWithHooks [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at updateFunctionComponent [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:19617:20[90m)[39m
    at beginWork [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21640:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'events')]
    at reportException (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'events')
    at [90m/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:391:44
    at TelemetryDashboardPage [90m(/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:427:15[90m)[39m
    at renderWithHooks [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at updateFunctionComponent [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:19617:20[90m)[39m
    at beginWork [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21640:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
The above error occurred in the <TelemetryDashboardPage> component:

    at TelemetryDashboardPage (/workspace/prisma/src/pages/telemetry/dashboard.tsx:31:79)
    at QueryClientProvider (file:///workspace/prisma/node_modules/.pnpm/@tanstack+react-query@5.90.4_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | tests/telemetry/dashboard-page.test.tsx > TelemetryDashboardPage > syncs telemetry and refetches data on success
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'events')]
    at reportException (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'events')
    at [90m/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:391:44
    at TelemetryDashboardPage [90m(/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:427:15[90m)[39m
    at renderWithHooks [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at updateFunctionComponent [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:19617:20[90m)[39m
    at beginWork [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21640:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'events')]
    at reportException (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'events')
    at [90m/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:391:44
    at TelemetryDashboardPage [90m(/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:427:15[90m)[39m
    at renderWithHooks [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at updateFunctionComponent [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:19617:20[90m)[39m
    at beginWork [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21640:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
The above error occurred in the <TelemetryDashboardPage> component:

    at TelemetryDashboardPage (/workspace/prisma/src/pages/telemetry/dashboard.tsx:31:79)
    at QueryClientProvider (file:///workspace/prisma/node_modules/.pnpm/@tanstack+react-query@5.90.4_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | tests/telemetry/dashboard-page.test.tsx > TelemetryDashboardPage > surfaces sync failures to the toast system
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'events')]
    at reportException (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'events')
    at [90m/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:391:44
    at TelemetryDashboardPage [90m(/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:427:15[90m)[39m
    at renderWithHooks [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at updateFunctionComponent [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:19617:20[90m)[39m
    at beginWork [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21640:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
Error: Uncaught [TypeError: Cannot read properties of undefined (reading 'events')]
    at reportException (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/workspace/prisma/node_modules/.pnpm/jsdom@26.1.0/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/workspace/prisma/node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12) TypeError: Cannot read properties of undefined (reading 'events')
    at [90m/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:391:44
    at TelemetryDashboardPage [90m(/workspace/prisma/[39msrc/pages/telemetry/dashboard.tsx:427:15[90m)[39m
    at renderWithHooks [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:15486:18[90m)[39m
    at updateFunctionComponent [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:19617:20[90m)[39m
    at beginWork [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:21640:16[90m)[39m
    at HTMLUnknownElement.callCallback [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/react-dom@18.3.1_react@18.3.1/node_modules/[4mreact-dom[24m/cjs/react-dom.development.js:4164:14[90m)[39m
    at HTMLUnknownElement.callTheUserObjectsOperation [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/generated/EventListener.js:26:30[90m)[39m
    at innerInvokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:350:25[90m)[39m
    at invokeEventListeners [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:286:3[90m)[39m
    at HTMLUnknownElementImpl._dispatch [90m(/workspace/prisma/[39mnode_modules/[4m.pnpm[24m/jsdom@26.1.0/node_modules/[4mjsdom[24m/lib/jsdom/living/events/EventTarget-impl.js:233:9[90m)[39m
The above error occurred in the <TelemetryDashboardPage> component:

    at TelemetryDashboardPage (/workspace/prisma/src/pages/telemetry/dashboard.tsx:31:79)
    at QueryClientProvider (file:///workspace/prisma/node_modules/.pnpm/@tanstack+react-query@5.90.4_react@18.3.1/node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js:20:3)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 âœ“ tests/audit/audit-responses-edge.test.ts (3 tests) 158ms
 â¯ tests/telemetry/dashboard-page.test.tsx (4 tests | 3 failed) 3549ms
   Ã— TelemetryDashboardPage > shows loading state then renders telemetry metrics 1301ms
     â†’ expected "spy" to be called 1 times, but got 2 times

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
   Ã— TelemetryDashboardPage > syncs telemetry and refetches data on success 1075ms
     â†’ Unable to find an element with the text: Coverage ratios. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m
   Ã— TelemetryDashboardPage > surfaces sync failures to the toast system 1068ms
     â†’ Unable to find an element with the text: Coverage ratios. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m
   âœ“ TelemetryDashboardPage > renders an error card when the summary request fails 101ms
 âœ“ tests/audit/evidence.test.ts (5 tests) 29ms
 âœ“ tests/reporting/pbc-manager-page.test.tsx (2 tests) 914ms
   âœ“ PbcManagerPage acceptance gating > blocks access until acceptance is approved  306ms
   âœ“ PbcManagerPage workflow > instantiates templates using procedure matching and surfaces success toasts  605ms
 âœ“ tests/accounting/accounting-close-service.test.ts (6 tests) 139ms
 âœ“ tests/api/group-component-route.test.ts (2 tests) 86ms
 âœ“ tests/openai-chat-completions.test.ts (7 tests) 31ms
 âœ“ tests/api/api-guard.test.ts (3 tests) 45ms
stderr | tests/gateway/middleware.test.ts > OrgGuard > rejects missing organisation identifier
{"level":"warn","event":"gateway.org_guard_missing","requestId":"req-1","path":"/resource","timestamp":"2025-10-22T21:47:45.259Z"}

stderr | tests/gateway/middleware.test.ts > API key validator > rejects requests without API key
{"level":"warn","event":"gateway.api_key_missing","requestId":"req-3","path":"/secure","timestamp":"2025-10-22T21:47:45.274Z"}

stdout | tests/gateway/middleware.test.ts > Idempotency middleware > stores new responses on success
{"level":"info","event":"gateway.idempotency_pending","orgId":"11111111-2222-3333-4444-555555555555","resource":"tests:new","requestId":"req-6","timestamp":"2025-10-22T21:47:45.281Z"}

 âœ“ tests/gateway/middleware.test.ts (6 tests) 28ms
 âœ“ tests/api/exp-assessments-route.test.ts (2 tests) 73ms
 âœ“ tests/api/financials-consolidation-route.test.ts (3 tests) 44ms
 âœ“ tests/telemetry/summary-route.test.ts (3 tests) 40ms
 âœ“ tests/web/respond-helpers.test.ts (5 tests) 58ms
 âœ“ tests/audit/audit-controls-edge.test.ts (2 tests) 167ms
 âœ“ tests/approval-service.test.ts (4 tests) 24ms
 âœ“ tests/audit/telemetry-sync-edge.test.ts (2 tests) 88ms
 âœ“ tests/api/exp-assessments-conclude-route.test.ts (2 tests) 50ms
 âœ“ tests/audit/audit-plan-edge.test.ts (2 tests) 252ms
 âœ“ tests/drive/drive-utils.test.ts (6 tests) 19ms
 âœ“ tests/audit/tenant-client.test.ts (5 tests) 152ms
 âœ“ tests/audit/audit-plan-service.test.ts (3 tests) 71ms
 âœ“ tests/audit/knowledge-ingest-edge.test.ts (2 tests) 144ms
 âœ“ tests/system-config-loader.node.test.ts (4 tests) 153ms
 âœ“ tests/reporting/consolidation-page.test.tsx (2 tests) 597ms
   âœ“ ConsolidationPage > notifies the user when engagement context is missing  374ms
 âœ“ tests/telemetry-service.test.ts (3 tests) 63ms
 âœ“ tests/audit/analytics-engine.test.ts (5 tests) 87ms
 âœ“ lib/__tests__/webhook.test.ts (6 tests) 28ms
stderr | tests/secrets/secret-manager.test.ts > SecretManager > throws when secret required but missing
secret_manager_vault_read_failed {
  path: [32m'apps/service'[39m,
  field: [32m'service_role_key'[39m,
  error: VaultClientError: Secret field service_role_key missing at apps/service
      at SecretManager.getSecret [90m(/workspace/prisma/[39mlib/secrets/secret-manager.ts:53:19[90m)[39m
  [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
      at [90m/workspace/prisma/[39mtests/secrets/secret-manager.test.ts:73:5
      at [90mfile:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
    cause: [90mundefined[39m
  }
}

 âœ“ tests/secrets/secret-manager.test.ts (4 tests) 38ms
 âœ“ tests/openai-file-search.test.ts (2 tests) 19ms
 âœ“ services/agents/__tests__/audit-execution.test.ts (3 tests) 22ms
 âœ“ tests/openai-debug.test.ts (3 tests) 28ms
 âœ“ tests/agent-conversation-recorder.test.ts (2 tests) 15ms
 âœ“ tests/audit/schemas.test.ts (3 tests) 20ms
 âœ“ tests/financials/consolidation-service.test.ts (4 tests) 33ms
 âœ“ tests/clients/client-onboarding-agent.test.ts (4 tests) 15ms
 âœ“ tests/error-notify.test.ts (3 tests) 120ms
 âœ“ tests/api/analytics-overview-route.test.ts (1 test) 54ms
 âœ“ tests/openai-stream.test.ts (1 test) 18ms
 âœ“ tests/secrets/vault-client.test.ts (3 tests) 20ms
 âœ“ tests/audit/idempotency.test.ts (4 tests) 31ms
stderr | tests/rag/openai-client-lazy-load.test.ts > RAG service OpenAI client lazy loading > does not construct the OpenAI client during module import when credentials are missing
services/rag: invalid environment variables { _errors: [], OPENAI_API_KEY: { _errors: [ 'Required' ] } }

 â¯ tests/rag/openai-client-lazy-load.test.ts (1 test | 1 failed) 275ms
   Ã— RAG service OpenAI client lazy loading > does not construct the OpenAI client during module import when credentials are missing 266ms
     â†’ services/rag environment validation failed
 âœ“ tests/openai-audio.test.ts (2 tests) 442ms
   âœ“ openai audio helpers > transcribes audio buffer with default model  349ms
stderr | tests/analytics/analytics-overview-page.test.tsx > AnalyticsOverviewPage > renders charts when data resolves
The width(0) and height(0) of chart should be greater than 0,
       please check the style of container, or the props width(100%) and height(100%),
       or add a minWidth(0) or minHeight(undefined) or use aspect(undefined) to control the
       height and width.
The width(0) and height(0) of chart should be greater than 0,
       please check the style of container, or the props width(100%) and height(100%),
       or add a minWidth(0) or minHeight(undefined) or use aspect(undefined) to control the
       height and width.

 âœ“ tests/analytics/analytics-overview-page.test.tsx (1 test) 673ms
   âœ“ AnalyticsOverviewPage > renders charts when data resolves  662ms
 âœ“ tests/openai-realtime.test.ts (5 tests) 28ms
 âœ“ tests/openai-workloads.test.ts (4 tests) 17ms
 âœ“ tests/api/nps-route.test.ts (2 tests) 72ms
 âœ“ tests/secrets/supabase-secrets.test.ts (3 tests) 15ms
 âœ“ tests/audit/approvals.test.ts (1 test) 13ms
 âœ“ tests/api/group-route.test.ts (2 tests) 53ms
 âœ“ tests/security/signed-url-policy.test.ts (6 tests) 12ms
 âœ“ tests/kam-export.test.ts (3 tests) 10ms
 âœ“ tests/report-decision.test.ts (5 tests) 9ms
stderr | tests/audit/sampling-client.test.ts > sampling client > falls back to deterministic plan when the sampling service fails
Sampling service unavailable, falling back to deterministic fixture. Error: network failure
    at [90m/workspace/prisma/[39mtests/audit/sampling-client.test.ts:33:50
    at [90mfile:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
    at runSuite [90m(file:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///workspace/prisma/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

 âœ“ tests/audit/sampling-client.test.ts (2 tests) 28ms
 âœ“ tests/audit/activity-log.test.ts (2 tests) 14ms
 âœ“ tests/financials/financial-report-service.test.ts (3 tests) 22ms
 âœ“ tests/rag-readiness.test.ts (3 tests) 10ms
 âœ“ tests/openai-agent-service.test.ts (2 tests) 14ms
 âœ“ tests/pbc-manager.test.ts (4 tests) 12ms
 âœ“ tests/web/client-portal-upload-service.test.ts (2 tests) 20ms
 âœ“ tests/tax/dac6.test.ts (3 tests) 11ms
stdout | tests/agents/director.test.ts > DirectorAgent > produces plan with relevant tasks for audit objective
{"level":"info","msg":"director.plan_generated","orgId":"org-1","objective":"Audit engagement for FY24","taskCount":7}

stdout | tests/agents/director.test.ts > DirectorAgent > includes controller and AP agents for finance objectives
{"level":"info","msg":"director.plan_generated","orgId":"org-1","objective":"Prepare close package and invoice run for Q2","taskCount":8}

stdout | tests/agents/director.test.ts > DirectorAgent > selects corporate finance agent for board reporting
{"level":"info","msg":"director.plan_generated","orgId":"org-1","objective":"Prepare board liquidity update and covenant review","taskCount":7}

 âœ“ tests/agents/director.test.ts (3 tests) 20ms
 âœ“ tests/assistant/style-policy.test.ts (2 tests) 10ms
 âœ“ tests/tcwg-pack.test.ts (2 tests) 13ms
 âœ“ tests/openai-media.test.ts (2 tests) 21ms
 âœ“ src/components/__tests__/enhanced-button.test.tsx (3 tests) 274ms
 âœ“ tests/openai-stream-tools.test.ts (1 test) 7ms
 âœ“ lib/__tests__/retry.test.ts (1 test) 10ms

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 4 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  tests/rag/openai-client-lazy-load.test.ts > RAG service OpenAI client lazy loading > does not construct the OpenAI client during module import when credentials are missing
Error: services/rag environment validation failed
 â¯ services/rag/env.ts:69:9
     67| if (!parsed.success) {
     68|   console.error('services/rag: invalid environment variables', inspectâ€¦
     69|   throw new Error('services/rag environment validation failed');
       |         ^
     70| }
     71| 
 â¯ services/rag/index.ts:2:1

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/4]âŽ¯

 FAIL  tests/telemetry/dashboard-page.test.tsx > TelemetryDashboardPage > shows loading state then renders telemetry metrics
AssertionError: expected "spy" to be called 1 times, but got 2 times

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ tests/telemetry/dashboard-page.test.tsx:130:43
    128|     });
    129| 
    130|     await waitFor(() => expect(fetchMock).toHaveBeenCalledTimes(1));
       |                                           ^
    131|     await screen.findByText('Coverage ratios');
    132| 
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/4]âŽ¯

 FAIL  tests/telemetry/dashboard-page.test.tsx > TelemetryDashboardPage > syncs telemetry and refetches data on success
TestingLibraryElementError: Unable to find an element with the text: Coverage ratios. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m
 â¯ waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ findByText node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 â¯ tests/telemetry/dashboard-page.test.tsx:147:18
    145| 
    146|     const { queryClient } = renderWithClient();
    147|     await screen.findByText('Coverage ratios');
       |                  ^
    148| 
    149|     const button = screen.getByRole('button', { name: /sync telemetry/â€¦

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/4]âŽ¯

 FAIL  tests/telemetry/dashboard-page.test.tsx > TelemetryDashboardPage > surfaces sync failures to the toast system
TestingLibraryElementError: Unable to find an element with the text: Coverage ratios. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m
 â¯ waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ findByText node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 â¯ tests/telemetry/dashboard-page.test.tsx:184:18
    182| 
    183|     const { queryClient } = renderWithClient();
    184|     await screen.findByText('Coverage ratios');
       |                  ^
    185| 
    186|     syncTelemetryMock.mockRejectedValue(new Error('unable to sync'));

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/4]âŽ¯

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Unhandled Errors âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

Vitest caught 5 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

âŽ¯âŽ¯âŽ¯âŽ¯ Unhandled Rejection âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
TypeError: supabase.from(...).select(...).eq(...).lte is not a function
 â¯ processPendingDispatches services/rag/notifications/fanout.ts:186:6
    184|     .select('id, org_id, user_id, channel, payload, attempts, status, â€¦
    185|     .eq('status', 'pending')
    186|     .lte('scheduled_at', new Date().toISOString())
       |      ^
    187|     .order('scheduled_at', { ascending: true })
    188|     .limit(Math.max(1, DEFAULT_BATCH_SIZE));
 â¯ run services/rag/notifications/fanout.ts:166:13
 â¯ startNotificationFanoutWorker services/rag/notifications/fanout.ts:176:8
 â¯ services/rag/index.ts:2361:1
 â¯ processTicksAndRejections node:internal/process/task_queues:95:5
 â¯ VitestExecutor.runModule node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:397:4
 â¯ VitestExecutor.directRequest node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:375:3
 â¯ VitestExecutor.cachedRequest node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:189:11
 â¯ VitestExecutor.dependencyRequest node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:239:10
 â¯ tests/api/openai-chat-completions-endpoints.test.ts:256:18

This error originated in "tests/api/openai-chat-completions-endpoints.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "aborts the upstream stream when the client disconnects mid-stream". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

âŽ¯âŽ¯âŽ¯âŽ¯ Unhandled Rejection âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
TypeError: supabase.from(...).select(...).eq(...).lte is not a function
 â¯ processPendingDispatches services/rag/notifications/fanout.ts:186:6
    184|     .select('id, org_id, user_id, channel, payload, attempts, status, â€¦
    185|     .eq('status', 'pending')
    186|     .lte('scheduled_at', new Date().toISOString())
       |      ^
    187|     .order('scheduled_at', { ascending: true })
    188|     .limit(Math.max(1, DEFAULT_BATCH_SIZE));
 â¯ run services/rag/notifications/fanout.ts:166:13
 â¯ startNotificationFanoutWorker services/rag/notifications/fanout.ts:176:8
 â¯ services/rag/index.ts:2361:1
 â¯ processTicksAndRejections node:internal/process/task_queues:95:5
 â¯ VitestExecutor.runModule node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:397:4
 â¯ VitestExecutor.directRequest node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:375:3
 â¯ VitestExecutor.cachedRequest node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:189:11
 â¯ VitestExecutor.dependencyRequest node_modules/.pnpm/vite-node@3.2.4_@types+node@22.18.10_jiti@1.21.7_terser@5.44.0_yaml@2.8.1/node_modules/vite-node/dist/client.mjs:239:10
 â¯ tests/api/learning-endpoints.test.ts:373:18

This error originated in "tests/api/learning-endpoints.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Uncaught Exception âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
TypeError: Cannot read properties of undefined (reading 'events')
 â¯ src/pages/telemetry/dashboard.tsx:391:44
    389|               {(() => {
    390|                 const totals = embeddingQuery.data.totals;
    391|                 const failureRate = totals.events ? (totals.refused / â€¦
       |                                            ^
    392|                 const reviewRate = totals.events ? (totals.review / toâ€¦
    393|                 return (
 â¯ TelemetryDashboardPage src/pages/telemetry/dashboard.tsx:427:15
 â¯ renderWithHooks node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:15486:18
 â¯ updateFunctionComponent node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:19617:20
 â¯ beginWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:21640:16
 â¯ beginWork$1 node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27465:14
 â¯ performUnitOfWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12
 â¯ workLoopSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26505:5
 â¯ renderRootSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26473:7
 â¯ recoverFromConcurrentError node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:25889:20

This error originated in "tests/telemetry/dashboard-page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows loading state then renders telemetry metrics". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Uncaught Exception âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
TypeError: Cannot read properties of undefined (reading 'events')
 â¯ src/pages/telemetry/dashboard.tsx:391:44
    389|               {(() => {
    390|                 const totals = embeddingQuery.data.totals;
    391|                 const failureRate = totals.events ? (totals.refused / â€¦
       |                                            ^
    392|                 const reviewRate = totals.events ? (totals.review / toâ€¦
    393|                 return (
 â¯ TelemetryDashboardPage src/pages/telemetry/dashboard.tsx:427:15
 â¯ renderWithHooks node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:15486:18
 â¯ updateFunctionComponent node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:19617:20
 â¯ beginWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:21640:16
 â¯ beginWork$1 node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27465:14
 â¯ performUnitOfWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12
 â¯ workLoopSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26505:5
 â¯ renderRootSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26473:7
 â¯ recoverFromConcurrentError node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:25889:20

This error originated in "tests/telemetry/dashboard-page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "syncs telemetry and refetches data on success". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Uncaught Exception âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯
TypeError: Cannot read properties of undefined (reading 'events')
 â¯ src/pages/telemetry/dashboard.tsx:391:44
    389|               {(() => {
    390|                 const totals = embeddingQuery.data.totals;
    391|                 const failureRate = totals.events ? (totals.refused / â€¦
       |                                            ^
    392|                 const reviewRate = totals.events ? (totals.review / toâ€¦
    393|                 return (
 â¯ TelemetryDashboardPage src/pages/telemetry/dashboard.tsx:427:15
 â¯ renderWithHooks node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:15486:18
 â¯ updateFunctionComponent node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:19617:20
 â¯ beginWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:21640:16
 â¯ beginWork$1 node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:27465:14
 â¯ performUnitOfWork node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26599:12
 â¯ workLoopSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26505:5
 â¯ renderRootSync node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:26473:7
 â¯ recoverFromConcurrentError node_modules/.pnpm/react-dom@18.3.1_react@18.3.1/node_modules/react-dom/cjs/react-dom.development.js:25889:20

This error originated in "tests/telemetry/dashboard-page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "surfaces sync failures to the toast system". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯


 Test Files  2 failed | 82 passed (84)
      Tests  4 failed | 329 passed (333)
     Errors  5 errors
   Start at  21:46:49
   Duration  152.62s (transform 11.95s, setup 17.21s, collect 25.34s, tests 23.43s, environment 145.49s, prepare 24.43s)

â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
