# Prisma production environment template.
# Replace placeholder values with real credentials before deploying.

# --- Runtime & Base URLs ---
NODE_ENV="production"
ENVIRONMENT="production"
SERVICE_VERSION=""
PORT="4000"
PRODUCTION_HEALTH_URL="https://app.prismaglow.example.com/api/healthz"
API_BASE_URL="https://api.prismaglow.example.com"
FASTAPI_BASE_URL="https://api.prismaglow.example.com"
NEXT_PUBLIC_API_BASE="https://api.prismaglow.example.com"
VITE_API_BASE_URL="https://api.prismaglow.example.com"
AGENT_SERVICE_URL="https://api.prismaglow.example.com"
RAG_SERVICE_URL="https://api.prismaglow.example.com/rag"
AGENT_SERVICE_API_KEY="<SET_ON_SERVER_OR_VAULT>"
RAG_SERVICE_API_KEY="<SET_ON_SERVER_OR_VAULT>"
API_KEYS=""
GATEWAY_API_KEYS=""
SKIP_HEALTHCHECK_DB="false"
SYSTEM_CONFIG_PATH="/etc/prisma/config.json"
KEEP_ALIVE_TIMEOUT="65"
CI="false"

# --- Supabase & Persistence ---
SUPABASE_URL="https://xzwowkxzgqigfuefmaji.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="<SET_ON_SERVER_OR_VAULT>"
SUPABASE_JWT_SECRET="<SET_ON_SERVER_OR_VAULT>"
SUPABASE_JWT_AUDIENCE="authenticated"
SUPABASE_DOCUMENTS_BUCKET="documents"
SUPABASE_ALLOW_STUB="false"
DATABASE_URL="postgresql://user:password@host:5432/db"
DIRECT_URL="postgresql://user:password@host:5432/db?pgbouncer=true"
REDIS_URL="redis://user:password@host:6379/0"
SUPABASE_VAULT_PATH="apps/prisma-glow-15/supabase"
SUPABASE_SERVICE_ROLE_VAULT_FIELD="service_role_key"
SUPABASE_JWT_VAULT_FIELD="jwt_secret"
VAULT_ADDR="https://vault.prismaglow.example.com"
VAULT_TOKEN="<SET_ON_SERVER_OR_VAULT>"
VAULT_KV_MOUNT="secret"

# --- Managed encryption (CMEK/KMS) ---
SUPABASE_ENCRYPTION_PROVIDER="aws"
SUPABASE_ENCRYPTION_KEY_REFERENCE="arn:aws:kms:us-east-1:123456789012:key/00000000-0000-0000-0000-000000000000"
OBJECT_STORAGE_ENCRYPTION_PROVIDER="aws"
OBJECT_STORAGE_ENCRYPTION_KEY_REFERENCE="arn:aws:kms:us-east-1:123456789012:key/11111111-1111-1111-1111-111111111111"
JOB_QUEUE_ENCRYPTION_PROVIDER="aws"
JOB_QUEUE_ENCRYPTION_KEY_REFERENCE="arn:aws:kms:us-east-1:123456789012:key/22222222-2222-2222-2222-222222222222"

# --- Authentication (Keycloak / NextAuth) ---
AUTH_CLIENT_ID="REPLACE_WITH_AUTH_CLIENT_ID"
AUTH_CLIENT_SECRET="<SET_ON_SERVER_OR_VAULT>"
AUTH_ISSUER="https://auth.prismaglow.example.com/realms/prisma-glow"
AUTH_SECRET="<SET_ON_SERVER_OR_VAULT>"
AUTH_TRUST_HOST="true"
NEXTAUTH_URL="https://app.prismaglow.example.com"
NEXTAUTH_URL_INTERNAL="https://app-internal.prismaglow.example.com"
NEXTAUTH_SECRET="<SET_ON_SERVER_OR_VAULT>"
NEXT_SERVER_ACTIONS_ENCRYPTION_KEY="<SET_ON_SERVER_OR_VAULT>"
INVITE_ACCEPT_BASE_URL="https://app.prismaglow.example.com/auth/accept-invite"

# --- Frontend (Next.js & Vite) ---
NEXT_PUBLIC_SUPABASE_URL="https://xzwowkxzgqigfuefmaji.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="REPLACE_WITH_PUBLIC_ANON_KEY"
NEXT_PUBLIC_ACCOUNTING_MODE="close"
NEXT_PUBLIC_GROUP_AUDIT_MODE="workspace"
NEXT_PUBLIC_RECONCILIATION_MODE="db"
NEXT_PUBLIC_DEMO_ORG_ID=""
NEXT_PUBLIC_DEMO_ENGAGEMENT_ID=""
NEXT_PUBLIC_DEMO_USER_ID=""
NEXT_PUBLIC_TURNSTILE_SITE_KEY=""
VITE_SUPABASE_URL="https://xzwowkxzgqigfuefmaji.supabase.co"
VITE_SUPABASE_PROJECT_ID="xzwowkxzgqigfuefmaji"
VITE_SUPABASE_PUBLISHABLE_KEY="REPLACE_WITH_PUBLISHABLE_KEY"
VITE_ENABLE_DEMO_LOGIN="false"
VITE_ENABLE_PWA="true"
VITE_TRACKING_ENABLED="true"
VITE_DEMO_ORG_ID=""
VITE_DEMO_ENGAGEMENT_ID=""
VITE_DEMO_USER_ID=""
VITE_ENABLE_CAPTCHA="false"
VITE_ENABLE_PWNED_PASSWORD_CHECK="true"
VITE_TURNSTILE_SITE_KEY=""
RECONCILIATION_MODE="db"

# --- CAPTCHA & Email ---
TURNSTILE_SECRET_KEY="<SET_ON_SERVER_OR_VAULT>"
SMTP_HOST="smtp.prismaglow.com"
SMTP_PORT="587"
SMTP_USERNAME="smtp_user"
SMTP_PASSWORD="<SET_ON_SERVER_OR_VAULT>"
SMTP_FROM_EMAIL="no-reply@prismaglow.com"
SMTP_FROM_NAME="Prisma Glow"
SMTP_USE_SSL="false"
SMTP_USE_STARTTLS="true"
SMTP_TIMEOUT_SECONDS="10"

# --- Security, Access & Rate Limits ---
ALLOWED_HOSTS="app.prismaglow.example.com"
API_ALLOWED_ORIGINS="https://app.prismaglow.example.com"
CSP_ADDITIONAL_CONNECT_SRC=""
CSP_ADDITIONAL_IMG_SRC=""
SIGNED_URL_DEFAULT_TTL_SECONDS="300"
SIGNED_URL_EVIDENCE_TTL_SECONDS="300"
DOCUMENT_SIGN_TTL="300"
DOCUMENT_MAX_UPLOAD_BYTES="52428800"
ASSISTANT_RATE_LIMIT="20"
ASSISTANT_RATE_WINDOW_SECONDS="60"
DOCUMENT_UPLOAD_RATE_LIMIT="12"
DOCUMENT_UPLOAD_RATE_WINDOW_SECONDS="300"
KNOWLEDGE_RUN_RATE_LIMIT="6"
KNOWLEDGE_RUN_RATE_WINDOW_SECONDS="900"
KNOWLEDGE_PREVIEW_RATE_LIMIT="30"
KNOWLEDGE_PREVIEW_RATE_WINDOW_SECONDS="300"
RAG_INGEST_RATE_LIMIT="5"
RAG_INGEST_RATE_WINDOW_SECONDS="600"
RAG_REEMBED_RATE_LIMIT="5"
RAG_REEMBED_RATE_WINDOW_SECONDS="600"
RAG_SEARCH_RATE_LIMIT="40"
RAG_SEARCH_RATE_WINDOW_SECONDS="60"
RAG_SEARCH_TOP_K="12"
AUTOPILOT_SCHEDULE_RATE_LIMIT="10"
AUTOPILOT_SCHEDULE_RATE_WINDOW_SECONDS="600"
AUTOPILOT_JOB_RATE_LIMIT="20"
AUTOPILOT_JOB_RATE_WINDOW_SECONDS="600"
AUTOPILOT_WORKER_DISABLED="false"
AUTOPILOT_POLL_INTERVAL_SECONDS="15000"
AUTOPILOT_ACTIVE_INTERVAL_SECONDS="5"
AUTOPILOT_MAX_ATTEMPTS="3"
AUTOPILOT_BATCH_LIMIT="5"
ONBOARDING_START_RATE_LIMIT="8"
ONBOARDING_START_RATE_WINDOW_SECONDS="600"
ONBOARDING_LINK_RATE_LIMIT="30"
ONBOARDING_LINK_RATE_WINDOW_SECONDS="300"
ONBOARDING_COMMIT_RATE_LIMIT="5"
ONBOARDING_COMMIT_RATE_WINDOW_SECONDS="900"
API_RATE_LIMIT="60"
API_RATE_WINDOW_SECONDS="60"
WEB_HARVEST_INTERVAL_MS="60000"

# --- Automation & Integrations ---
ALLOW_DEMO_BOOTSTRAP="false"
DEMO_BOOTSTRAP_AUTH_TOKEN="REPLACE_WITH_DEMO_BOOTSTRAP_AUTH_TOKEN"
SEED_DATA_AUTH_TOKEN="REPLACE_WITH_SEED_DATA_AUTH_TOKEN"
AUTOMATION_WEBHOOK_SECRET="REPLACE_WITH_AUTOMATION_WEBHOOK_SECRET"
N8N_WEBHOOK_URL="https://n8n.prismaglow.example.com/webhook"
ERROR_NOTIFY_WEBHOOK="https://hooks.prismaglow.example.com/error"
RATE_LIMIT_ALERT_WEBHOOK="https://hooks.prismaglow.example.com/rate-limit"
SAMPLING_C1_BASE_URL="https://sampling.prismaglow.example.com/api/sampling"
SAMPLING_C1_API_KEY="REPLACE_WITH_SAMPLING_C1_API_KEY"

# --- Agent Runtime & Services ---
AGENT_MODEL="gpt-4.1-mini"
AGENT_PLANNER_MODEL="gpt-4.1-mini"
AGENT_POLICY_PACK_VERSION="policy-pack.v1"
AGENT_EVALUATION_BASE_URL=""
AGENT_EVALUATION_BEARER_TOKEN="<SET_ON_SERVER_OR_VAULT>"
ORCHESTRATION_POLL_INTERVAL_MS="15000"

# --- OpenAI Platform ---
OPENAI_API_KEY="<SET_ON_SERVER_OR_VAULT>"
OPENAI_BASE_URL="https://api.openai.com/v1"
OPENAI_ORG_ID="REPLACE_WITH_OPENAI_ORG_ID"
OPENAI_RPM="60"
OPENAI_DEFAULT_REASONING_EFFORT="low"
OPENAI_DEFAULT_VERBOSITY="medium"
OPENAI_AGENT_REASONING_EFFORT="low"
OPENAI_AGENT_VERBOSITY="medium"
OPENAI_SUMMARY_REASONING_EFFORT="minimal"
OPENAI_SUMMARY_VERBOSITY="low"
OPENAI_TIMEOUT_SECONDS="60"
OPENAI_USER_AGENT_TAG="prisma-glow-15"
OPENAI_AGENT_PLATFORM_ENABLED="false"
OPENAI_AGENT_ID=""
OPENAI_AGENT_MODEL="gpt-5"
OPENAI_PLANNER_MODEL="gpt-5"
OPENAI_DEBUG_LOGGING="false"
OPENAI_DEBUG_FETCH_DETAILS="false"
OPENAI_STREAMING_ENABLED="false"
OPENAI_STREAMING_TOOL_ENABLED="false"
OPENAI_REALTIME_ENABLED="false"
OPENAI_REALTIME_MODEL="gpt-4o-realtime-preview"
OPENAI_REALTIME_VOICE="verse"
OPENAI_REALTIME_TURN_SERVERS=""
OPENAI_TRANSCRIPTION_MODEL="gpt-5-transcribe"
OPENAI_TTS_MODEL="gpt-4o-mini-tts"
OPENAI_TTS_VOICE="alloy"
OPENAI_TTS_FORMAT="mp3"
OPENAI_SORA_ENABLED="false"
OPENAI_SORA_MODEL="sora-1.1"
OPENAI_SORA_ASPECT_RATIO="16:9"
OPENAI_WEB_SEARCH_ENABLED="false"
OPENAI_WEB_SEARCH_MODEL="gpt-5"
OPENAI_SUMMARY_MODEL="gpt-5"
OPENAI_VISION_MODEL="gpt-5"
OPENAI_WHISPER_MODEL="whisper-1"
OPENAI_FINANCE_WORKLOAD=""
OPENAI_ORCHESTRATOR_ENABLED="false"

# --- Retrieval & Knowledge Ingestion ---
EMBEDDING_MODEL="text-embedding-3-small"
EMBED_MODEL="text-embedding-3-small"
GDRIVE_FOLDER_ID=""
GDRIVE_SHARED_DRIVE_ID=""
GDRIVE_SERVICE_ACCOUNT_EMAIL=""
GDRIVE_SERVICE_ACCOUNT_KEY=""
GDRIVE_PROCESS_BATCH_LIMIT="100"
GDRIVE_WATCH_CHANNEL_TOKEN=""
GOOGLE_DRIVE_CLIENT_ID=""
GOOGLE_DRIVE_CLIENT_SECRET=""
GOOGLE_DRIVE_REFRESH_TOKEN=""
GOOGLE_SERVICE_ACCOUNT_KEY_PATH="./service-account.json"
GOOGLE_SHEET_ID=""
GOOGLE_PROJECT_ID=""
GOOGLE_LOCATION="us"
DOCAI_PROCESSOR_ID=""

# Database connection (Prisma)
# Configure these in GitHub Actions or your hosting provider secrets; avoid committing real values
DATABASE_URL="postgresql://user:password@host:5432/db"
DIRECT_URL="postgresql://user:password@host:5432/db?pgbouncer=true"

# --- QA & Testing ---
PLAYWRIGHT_RUN="false"
PLAYWRIGHT_BASE_URL="https://app.prismaglow.example.com"
PLAYWRIGHT_ORG_SLUG=""
PLAYWRIGHT_SMOKE_PATHS=""
PLAYWRIGHT_START_WEB_SERVER="false"
VITEST_COVERAGE_BRANCHES="80"
VITEST_COVERAGE_FUNCTIONS="80"
VITEST_COVERAGE_LINES="80"
VITEST_COVERAGE_STATEMENTS="80"

# --- Platform overrides (optional) ---
VERCEL_URL=""
VERCEL=""

# --- Self-hosted infrastructure (docker-compose.prod.yml) ---
POSTGRES_USER="postgres"
POSTGRES_PASSWORD="REPLACE_WITH_POSTGRES_PASSWORD"
POSTGRES_DB="postgres"
MINIO_ROOT_USER="minioadmin"
MINIO_ROOT_PASSWORD="REPLACE_WITH_MINIO_ROOT_PASSWORD"
SENTRY_SECRET_KEY="REPLACE_WITH_SENTRY_SECRET_KEY"
SENTRY_DB_USER="sentry"
SENTRY_DB_PASSWORD="REPLACE_WITH_SENTRY_DB_PASSWORD"
SENTRY_DB_HOST="postgres"
SENTRY_REDIS_HOST="redis"
GATEWAY_IMAGE="registry.prismaglow.example.com/gateway:latest"
RAG_IMAGE="registry.prismaglow.example.com/rag:latest"
AGENT_IMAGE="registry.prismaglow.example.com/agent:latest"
ANALYTICS_IMAGE="registry.prismaglow.example.com/analytics:latest"
UI_IMAGE="registry.prismaglow.example.com/ui:latest"
WEB_IMAGE="registry.prismaglow.example.com/web:latest"
